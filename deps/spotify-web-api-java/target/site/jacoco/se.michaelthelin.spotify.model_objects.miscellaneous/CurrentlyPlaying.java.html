<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="de"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CurrentlyPlaying.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Spotify Web API Java Client</a> &gt; <a href="index.source.html" class="el_package">se.michaelthelin.spotify.model_objects.miscellaneous</a> &gt; <span class="el_source">CurrentlyPlaying.java</span></div><h1>CurrentlyPlaying.java</h1><pre class="source lang-java linenums">package se.michaelthelin.spotify.model_objects.miscellaneous;

import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.google.gson.JsonObject;
import se.michaelthelin.spotify.enums.CurrentlyPlayingType;
import se.michaelthelin.spotify.model_objects.AbstractModelObject;
import se.michaelthelin.spotify.model_objects.IPlaylistItem;
import se.michaelthelin.spotify.model_objects.special.Actions;
import se.michaelthelin.spotify.model_objects.specification.Context;
import se.michaelthelin.spotify.model_objects.specification.Disallows;
import se.michaelthelin.spotify.model_objects.specification.Episode;
import se.michaelthelin.spotify.model_objects.specification.Track;

/**
 * Retrieve information about &lt;a href=&quot;https://developer.spotify.com/web-api/get-the-users-currently-playing-track/&quot;&gt;
 * Currently Playing objects&lt;/a&gt; by creating instances from this class.
 */
@JsonDeserialize(builder = CurrentlyPlaying.Builder.class)
public class CurrentlyPlaying extends AbstractModelObject {
  private final Context context;
  private final Long timestamp;
  private final Integer progress_ms;
  private final Boolean is_playing;
  private final IPlaylistItem item;
  private final CurrentlyPlayingType currentlyPlayingType;
  private final Actions actions;

  private CurrentlyPlaying(final Builder builder) {
<span class="fc" id="L29">    super(builder);</span>

<span class="fc" id="L31">    this.context = builder.context;</span>
<span class="fc" id="L32">    this.timestamp = builder.timestamp;</span>
<span class="fc" id="L33">    this.progress_ms = builder.progress_ms;</span>
<span class="fc" id="L34">    this.is_playing = builder.is_playing;</span>
<span class="fc" id="L35">    this.item = builder.item;</span>
<span class="fc" id="L36">    this.currentlyPlayingType = builder.currentlyPlayingType;</span>
<span class="fc" id="L37">    this.actions = builder.actions;</span>
<span class="fc" id="L38">  }</span>

  /**
   * Get the context the item was played from.
   *
   * @return The context the item was played from. Can be {@code null}.
   */
  public Context getContext() {
<span class="fc" id="L46">    return context;</span>
  }

  /**
   * Get the timestamp when the received data was fetched.
   *
   * @return Unix Millisecond Timestamp when data was fetched.
   */
  public Long getTimestamp() {
<span class="fc" id="L55">    return timestamp;</span>
  }

  /**
   * Get the progress of the current played item.
   *
   * @return Progress into the currently playing item. Can be {@code null}.
   */
  public Integer getProgress_ms() {
<span class="fc" id="L64">    return progress_ms;</span>
  }

  /**
   * Check if something is played at the moment.
   *
   * @return If something is currently playing.
   */
  public Boolean getIs_playing() {
<span class="fc" id="L73">    return is_playing;</span>
  }

  /**
   * Get the currently played track or episode.
   *
   * @return The currently playing track or episode. Can be {@code null}.
   */
  public IPlaylistItem getItem() {
<span class="fc" id="L82">    return item;</span>
  }

  /**
   * Get the type of the currently playing item.
   *
   * @return The type of the currently playing item.
   */
  public CurrentlyPlayingType getCurrentlyPlayingType() {
<span class="fc" id="L91">    return currentlyPlayingType;</span>
  }

  /**
   * Get which playback actions are available within the current context.
   *
   * @return A {@link Actions} object which contains a {@link Disallows} object.
   */
  public Actions getActions() {
<span class="fc" id="L100">    return actions;</span>
  }

  @Override
  public String toString() {
<span class="nc" id="L105">    return &quot;CurrentlyPlaying(context=&quot; + context + &quot;, timestamp=&quot; + timestamp + &quot;, progress_ms=&quot; + progress_ms</span>
        + &quot;, is_playing=&quot; + is_playing + &quot;, item=&quot; + item + &quot;, currentlyPlayingType=&quot; + currentlyPlayingType
        + &quot;, actions=&quot; + actions + &quot;)&quot;;
  }

  @Override
  public Builder builder() {
<span class="nc" id="L112">    return new Builder();</span>
  }

  /**
   * Builder class for building {@link CurrentlyPlaying} instances.
   */
<span class="fc" id="L118">  public static final class Builder extends AbstractModelObject.Builder {</span>
    private Context context;
    private Long timestamp;
    private Integer progress_ms;
    private Boolean is_playing;
    private IPlaylistItem item;
    private CurrentlyPlayingType currentlyPlayingType;
    private Actions actions;

    /**
     * The playing context setter.
     *
     * @param context The context the track was played from. Can be {@code null}.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setContext(Context context) {
<span class="fc" id="L134">      this.context = context;</span>
<span class="fc" id="L135">      return this;</span>
    }

    /**
     * The timestamp setter.
     *
     * @param timestamp Unix Millisecond Timestamp when data was fetched.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setTimestamp(Long timestamp) {
<span class="fc" id="L145">      this.timestamp = timestamp;</span>
<span class="fc" id="L146">      return this;</span>
    }

    /**
     * The current track progress setter.
     *
     * @param progress_ms Progress into the currently playing track. Can be {@code null}.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setProgress_ms(Integer progress_ms) {
<span class="fc" id="L156">      this.progress_ms = progress_ms;</span>
<span class="fc" id="L157">      return this;</span>
    }

    /**
     * The playing state setter.
     *
     * @param is_playing If something is currently playing.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setIs_playing(Boolean is_playing) {
<span class="fc" id="L167">      this.is_playing = is_playing;</span>
<span class="fc" id="L168">      return this;</span>
    }

    /**
     * The currently playing item setter.
     *
     * @param item The currently playing item. Can be {@code null}.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setItem(IPlaylistItem item) {
<span class="fc" id="L178">      this.item = item;</span>
<span class="fc" id="L179">      return this;</span>
    }

    /**
     * The currently playing type setter.
     *
     * @param currentlyPlayingType The type of the currently playing item.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setCurrentlyPlayingType(CurrentlyPlayingType currentlyPlayingType) {
<span class="fc" id="L189">      this.currentlyPlayingType = currentlyPlayingType;</span>
<span class="fc" id="L190">      return this;</span>
    }

    /**
     * The actions setter.
     *
     * @param actions A {@link Actions} object which contains a {@link Disallows} object.
     * @return A {@link CurrentlyPlaying.Builder}.
     */
    public Builder setActions(Actions actions) {
<span class="fc" id="L200">      this.actions = actions;</span>
<span class="fc" id="L201">      return this;</span>
    }

    @Override
    public CurrentlyPlaying build() {
<span class="fc" id="L206">      return new CurrentlyPlaying(this);</span>
    }
  }

  /**
   * JsonUtil class for building {@link CurrentlyPlaying} instances.
   */
<span class="fc" id="L213">  public static final class JsonUtil extends AbstractModelObject.JsonUtil&lt;CurrentlyPlaying&gt; {</span>
    public CurrentlyPlaying createModelObject(JsonObject jsonObject) {
<span class="pc bpc" id="L215" title="2 of 4 branches missed.">      if (jsonObject == null || jsonObject.isJsonNull()) {</span>
<span class="nc" id="L216">        return null;</span>
      }

<span class="fc" id="L219">      return new CurrentlyPlaying.Builder()</span>
<span class="fc" id="L220">        .setContext(</span>
<span class="fc bfc" id="L221" title="All 2 branches covered.">          hasAndNotNull(jsonObject, &quot;context&quot;)</span>
<span class="fc" id="L222">            ? new Context.JsonUtil().createModelObject(</span>
<span class="fc" id="L223">            jsonObject.getAsJsonObject(&quot;context&quot;))</span>
<span class="fc" id="L224">            : null)</span>
<span class="fc" id="L225">        .setTimestamp(</span>
<span class="pc bpc" id="L226" title="1 of 2 branches missed.">          hasAndNotNull(jsonObject, &quot;timestamp&quot;)</span>
<span class="fc" id="L227">            ? jsonObject.get(&quot;timestamp&quot;).getAsLong()</span>
<span class="nc" id="L228">            : null)</span>
<span class="fc" id="L229">        .setProgress_ms(</span>
<span class="pc bpc" id="L230" title="1 of 2 branches missed.">          hasAndNotNull(jsonObject, &quot;progress_ms&quot;)</span>
<span class="fc" id="L231">            ? jsonObject.get(&quot;progress_ms&quot;).getAsInt()</span>
<span class="nc" id="L232">            : null)</span>
<span class="fc" id="L233">        .setIs_playing(</span>
<span class="pc bpc" id="L234" title="1 of 2 branches missed.">          hasAndNotNull(jsonObject, &quot;is_playing&quot;)</span>
<span class="fc" id="L235">            ? jsonObject.get(&quot;is_playing&quot;).getAsBoolean()</span>
<span class="nc" id="L236">            : null)</span>
<span class="fc" id="L237">        .setItem(</span>
<span class="pc bpc" id="L238" title="2 of 4 branches missed.">          hasAndNotNull(jsonObject, &quot;item&quot;) &amp;&amp; hasAndNotNull(jsonObject, &quot;currently_playing_type&quot;)</span>
<span class="fc bfc" id="L239" title="All 2 branches covered.">            ? (jsonObject.get(&quot;currently_playing_type&quot;).getAsString().equals(&quot;track&quot;)</span>
<span class="fc" id="L240">            ? new Track.JsonUtil().createModelObject(jsonObject.getAsJsonObject(&quot;item&quot;))</span>
<span class="pc bpc" id="L241" title="1 of 2 branches missed.">            : jsonObject.get(&quot;currently_playing_type&quot;).getAsString().equals(&quot;episode&quot;)</span>
<span class="fc" id="L242">            ? new Episode.JsonUtil().createModelObject(jsonObject.getAsJsonObject(&quot;item&quot;))</span>
<span class="nc" id="L243">            : null)</span>
<span class="nc" id="L244">            : null)</span>
<span class="fc" id="L245">        .setCurrentlyPlayingType(</span>
<span class="pc bpc" id="L246" title="1 of 2 branches missed.">          hasAndNotNull(jsonObject, &quot;currently_playing_type&quot;)</span>
<span class="fc" id="L247">            ? CurrentlyPlayingType.keyOf(</span>
<span class="fc" id="L248">            jsonObject.get(&quot;currently_playing_type&quot;).getAsString().toLowerCase())</span>
<span class="nc" id="L249">            : null)</span>
<span class="fc" id="L250">        .setActions(</span>
<span class="pc bpc" id="L251" title="1 of 2 branches missed.">          hasAndNotNull(jsonObject, &quot;actions&quot;)</span>
<span class="fc" id="L252">            ? new Actions.JsonUtil().createModelObject(</span>
<span class="fc" id="L253">            jsonObject.getAsJsonObject(&quot;actions&quot;))</span>
<span class="nc" id="L254">            : null)</span>
<span class="fc" id="L255">        .build();</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>